id: 9147
name: ateliar-app
environments:
    production:
        memory: 1024
        storage: atelier-production-bucket
        runtime: 'php-7.4:al2'
        cli-memory: 512
        domain: atelierapp.com
        build:
            - 'composer install --no-dev'
            - 'php artisan event:cache'
            - 'npm install && npm run prod && rm -rf node_modules'
        deploy:
            - 'php artisan migrate --force'
    staging:
        memory: 1024
        storage: atelier-staging-bucket
        runtime: 'php-7.4:al2'
        cli-memory: 512
        database: staging-database
        domain: staging.atelierapp.com
        build:
            - 'composer install'
            - 'php artisan event:cache'
            - 'npm install && npm run prod && rm -rf node_modules'
        deploy:
            - 'php artisan migrate:fresh --force --seed'
            - 'php artisan optimize'
            - 'php artisan view:cache'

